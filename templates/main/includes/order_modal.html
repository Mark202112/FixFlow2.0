<!-- ═══════════════════════ ORDER MODAL ═══════════════════════ -->
<div id="orderModal" class="fixed inset-0 z-[120] hidden items-center justify-center p-4" style="display:none;">
    <!-- Overlay -->
    <div id="orderOverlay"
         onclick="closeOrderModal()"
         class="absolute inset-0 transition-opacity duration-300 opacity-0"
         style="background: rgba(0,0,0,0.7); backdrop-filter: blur(8px);"></div>

    <!-- Modal -->
    <div id="orderContainer"
         class="relative w-full max-w-lg p-8 md:p-10 shadow-2xl transform transition-all duration-300 scale-95 opacity-0 z-10"
         style="background: #1A1A1B; border: 1px solid rgba(0,122,255,0.35);">

        <!-- Blue accent line top -->
        <div class="absolute top-0 left-0 right-0 h-0.5" style="background: linear-gradient(to right, transparent, #007AFF, transparent);"></div>

        <!-- Close -->
        <button onclick="closeOrderModal()"
                class="absolute top-5 right-5 w-8 h-8 flex items-center justify-center text-gray-500 hover:text-white transition-all duration-300 hover:rotate-90"
                style="border: 1px solid rgba(255,255,255,0.1);">
            <i class="fas fa-times text-sm"></i>
        </button>

        <!-- Header -->
        <div class="mb-8">
            <span class="block text-[10px] font-bold uppercase tracking-[0.3em] mb-2" style="color:#007AFF;">Заявка на сервіс</span>
            <h2 class="text-3xl font-bold text-white tracking-tight">Оформлення</h2>
            <div class="mt-3 h-px w-12" style="background:#007AFF;"></div>
        </div>

        <!-- Form -->
        <form method="POST" action="{% url 'main:create_order' %}" class="space-y-4">
            {% csrf_token %}

            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                <div>
                    <label class="block text-[10px] font-bold uppercase tracking-[0.2em] mb-2" style="color:#007AFF;">Ім'я</label>
                    <input type="text" name="name" required placeholder="Ваше ім'я"
                           class="w-full px-4 py-3 text-white text-sm outline-none transition-colors placeholder-gray-600"
                           style="background: rgba(42,42,45,0.4); border: 1px solid rgba(255,255,255,0.08);"
                           onfocus="this.style.borderColor='rgba(0,122,255,0.6)'"
                           onblur="this.style.borderColor='rgba(255,255,255,0.08)'">
                </div>
                <div>
                    <label class="block text-[10px] font-bold uppercase tracking-[0.2em] mb-2" style="color:#007AFF;">Телефон</label>
                    <input type="tel" name="phone" required placeholder="0501234567"
                           class="w-full px-4 py-3 text-white text-sm outline-none transition-colors placeholder-gray-600"
                           style="background: rgba(42,42,45,0.4); border: 1px solid rgba(255,255,255,0.08);"
                           onfocus="this.style.borderColor='rgba(0,122,255,0.6)'"
                           onblur="this.style.borderColor='rgba(255,255,255,0.08)'">
                </div>
            </div>

            <div>
                <label class="block text-[10px] font-bold uppercase tracking-[0.2em] mb-2" style="color:#007AFF;">Пристрій</label>
                <input type="text" name="device" required placeholder="напр. iPhone 13 Pro, Samsung S23..."
                       class="w-full px-4 py-3 text-white text-sm outline-none transition-colors placeholder-gray-600"
                       style="background: rgba(42,42,45,0.4); border: 1px solid rgba(255,255,255,0.08);"
                       onfocus="this.style.borderColor='rgba(0,122,255,0.6)'"
                       onblur="this.style.borderColor='rgba(255,255,255,0.08)'">
            </div>

            <div>
                <label class="block text-[10px] font-bold uppercase tracking-[0.2em] mb-2" style="color:#007AFF;">Опис проблеми</label>
                <textarea name="problem" rows="4" placeholder="Опишіть що трапилось з пристроєм..."
                          class="w-full px-4 py-3 text-white text-sm outline-none transition-colors placeholder-gray-600 resize-none"
                          style="background: rgba(42,42,45,0.4); border: 1px solid rgba(255,255,255,0.08);"
                          onfocus="this.style.borderColor='rgba(0,122,255,0.6)'"
                          onblur="this.style.borderColor='rgba(255,255,255,0.08)'"></textarea>
            </div>

            <button type="submit"
                    class="w-full py-4 text-white text-sm font-semibold transition-all duration-300 hover:opacity-90 active:scale-[0.98] rounded-xl"
                    style="background: #007AFF; box-shadow: 0 0 18px rgba(0,122,255,0.3);">
                <i class="fas fa-paper-plane mr-2"></i>
                Відправити замовлення
            </button>
        </form>

        <div class="mt-6 pt-5 text-center" style="border-top: 1px solid rgba(255,255,255,0.05);">
            <button onclick="closeOrderModal()"
                    class="text-gray-600 hover:text-white text-[10px] font-bold uppercase tracking-[0.2em] transition-colors">
                Скасувати
            </button>
        </div>
    </div>
</div>

<script>
function openOrderModal() {
    const modal     = document.getElementById('orderModal');
    const container = document.getElementById('orderContainer');
    const overlay   = document.getElementById('orderOverlay');

    modal.style.display = 'flex';
    document.body.style.overflow = 'hidden';

    requestAnimationFrame(() => {
        overlay.classList.add('opacity-100');
        overlay.classList.remove('opacity-0');
        container.classList.remove('scale-95', 'opacity-0');
        container.classList.add('scale-100', 'opacity-100');
    });
}

function closeOrderModal() {
    const modal     = document.getElementById('orderModal');
    const container = document.getElementById('orderContainer');
    const overlay   = document.getElementById('orderOverlay');

    overlay.classList.remove('opacity-100');
    overlay.classList.add('opacity-0');
    container.classList.remove('scale-100', 'opacity-100');
    container.classList.add('scale-95', 'opacity-0');

    setTimeout(() => {
        modal.style.display = 'none';
        document.body.style.overflow = '';
    }, 300);
}

document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') closeOrderModal();
});
</script>
